<!DOCTYPE html>
<html>
<head>
    <title>Mini Ozon</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h1 class="mb-4">üì¶ Mini Ozon: –í–∏—Ç—Ä–∏–Ω–∞</h1>
    
    <form action="/" method="get" class="d-flex mb-4">
        <input type="text" name="search" class="form-control me-2" placeholder="–ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä..." value="{{ search_query }}">
        <button type="submit" class="btn btn-primary">–ü–æ–∏—Å–∫</button>
        <a href="/" class="btn btn-outline-secondary ms-2">–°–±—Ä–æ—Å</a>
    </form>

    <table class="table table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–°–∫–ª–∞–¥</th>
                <th>–î–µ–π—Å—Ç–≤–∏–µ</th> </tr>
        </thead>
        <tbody>
            {% for p in products %}
            <tr>
                <td>{{ p.id }}</td>
                <td><strong>{{ p.name }}</strong></td>
                <td>{{ p.price }} ‚ÇΩ</td>
                <td>{{ p.stock }} —à—Ç.</td>
                <td>
                    {% if p.stock > 0 %}
                    <form action="/buy/{{ p.id }}" method="post" style="margin:0;">
                        <button type="submit" class="btn btn-success btn-sm">–ö—É–ø–∏—Ç—å</button>
                    </form>
                    {% else %}
                    <span class="text-danger small">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if not products %}
        <div class="alert alert-info">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>
    {% endif %}

    <div class="card mt-5 p-4 shadow-sm">
        <h3 class="mb-3">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ê–¥–º–∏–Ω–∫–∞)</h3>
        <form action="/admin/add" method="post" class="row g-3">
            <div class="col-md-4">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                <input type="text" name="name" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: iPhone 15" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                <input type="number" step="0.01" name="price" class="form-control" placeholder="0.00" required>
            </div>
            <div class="col-md-2">
                <label class="form-label">–ö–æ–ª-–≤–æ</label>
                <input type="number" name="stock" class="form-control" placeholder="10" required>
            </div>
            <div class="col-md-3 d-flex align-items-end">
                <button type="submit" class="btn btn-dark w-100">–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É</button>
            </div>
        </form>
    </div>

</body>
</html>